[project]
name = "manufacturing-docs-pipeline"
version = "0.1.0"
description = "제조 현장 검사 데이터를 수집하고 고객용 보고서를 자동 생성하는 파이프라인"
channels = ["conda-forge"]
platforms = ["linux-64", "osx-arm64", "osx-64", "win-64"]

[dependencies]
python = ">=3.10,<3.13"
openpyxl = ">=3.1"
jinja2 = ">=3.1"
pyyaml = ">=6.0"
weasyprint = ">=60"
pillow = ">=10"
filelock = ">=3.12"

[feature.dev.dependencies]
pytest = ">=7"
pytest-cov = "*"
ruff = ">=0.4"

[environments]
default = { features = ["dev"], solve-group = "main" }
prod = { solve-group = "main" }

[tasks]
# 파이프라인 실행
pipeline = "python -m src.pipeline.main"
demo = "python tools/create_demo_job.py"
validate = "python tools/validate_definition.py"

# 개발
test = "pytest tests/ -v"
test-cov = "pytest tests/ -v --cov=src --cov-report=term-missing"
lint = "ruff check src/ tools/"
format = "ruff format src/ tools/"
check = { depends-on = ["lint", "test"] }
